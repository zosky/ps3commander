{"version":3,"sources":["webpack:///./src/views/game.vue","webpack:///./src/views/game.vue?e05c","webpack:///./node_modules/core-js/modules/es.array.find.js"],"names":["class","id","src","IMGdir","game","images","image","alt","name","$moment","date","from","developer","publisher","genre","g","key","desc","ps3","info","$router","go","players","controllers","move","i","guitar","components","DiscPlayer","Backburger","ServerPlus","Application","setup","dataStore","route","state","DEV","data","theseGames","find","params","viewMode","filters","playing","status","user","icon","powerOn","on","readyToMount","gameTags","G","mountDisk","gameId","getters","postData","getData","history","mounted","push","pushHistory","toWhere","withWhat","includes","length","slice","localStorage","setItem","JSON","stringify","rID","viewed","render","$","$find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","callbackfn","this","arguments","undefined"],"mappings":"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","file":"js/game.f8deef58.js","sourcesContent":["<template>\n  <div class=\"p-2 sm:grid sm:grid-cols-2\">\n    <img :src=\"`${IMGdir}${game.images.image}`\" :alt=\"game?.id\" />\n    <div>\n      <div\n        :class=\"[\n          'mt-10 mb-3 pt-4 w-max p-3',\n          'mx-auto',\n          'transform -rotate-6',\n          'bg-blue-300 bg-opacity-50',\n          'flex flex-col',\n          'rounded-xl shadow-lg',\n        ]\"\n      >\n        <div class=\"text-xl font-bold text-blue-800 border-b border-blue-300\">\n          {{ game?.name }}\n        </div>\n        <div class=\"text-sm text-blue-600\">\n          {{ $moment(game?.date).from($moment()) }}\n        </div>\n        <div class=\"text-xs font-light text-gray-400\">\n          {{ game?.developer }} > {{ game?.publisher }}\n        </div>\n      </div>\n\n      <div\n        :class=\"[\n          'flex flex-row justify-center gap-3',\n          '-mt-3 ml-2 mb-5',\n          'text-xs transform -rotate-6',\n        ]\"\n      >\n        <div\n          v-for=\"g in game?.genre\"\n          :key=\"g\"\n          class=\"ring p-1 rounded-xl px-2 text-blue-600 ring-blue-200 shadow\"\n        >\n          {{ g }}\n        </div>\n      </div>\n      <div class=\"text-2xl w-full flex flex-row p-2 items-center pt-5\"></div>\n      <div\n        v-if=\"game?.desc\"\n        :class=\"[\n          'col-span-full p-4 m-3',\n          'ring ring-blue-300',\n          'text-blue-800 text-xs',\n          'rounded-2xl shadow-sm',\n          'hidden sm:block',\n        ]\"\n      >\n        {{ game?.desc }}\n      </div>\n    </div>\n    <div class=\"flex flex-row-reverse col-span-full items-center\">\n      <div\n        @click=\"\n          readyToMount\n            ? mountDisk(game.id)\n            : user == false\n            ? $router.push({ name: 'ps3status' })\n            : ''\n        \"\n        :class=\"[\n          'rounded-2xl  text-center text-blue-50 text-9xl',\n          readyToMount\n            ? 'cursor-pointer bg-blue-400'\n            : 'cursor-wait ring ring-purple-200 text-purple-200 bg-purple-300 ',\n        ]\"\n      >\n        <DiscPlayer v-if=\"game?.ps3?.info == '/dev_ntfs/PS3ISO'\" />\n        <ServerPlus v-else-if=\"game?.ps3?.info == '/net0/PS3ISO'\" />\n        <Application v-else />\n      </div>\n\n      <Backburger\n        class=\"\n          px-3\n          mx-2\n          ring ring-blue-400\n          rounded-2xl\n          text-center text-blue-400 text-9xl\n          cursor-pointer\n        \"\n        @click=\"$router.go(-1)\"\n      />\n      <div\n        id=\"controllers\"\n        class=\"\n          p-3\n          m-2\n          flex flex-row\n          place-items-center\n          ring ring-blue-400\n          rounded-2xl\n          text-center text-blue-400 text-8xl\n        \"\n      >\n        {{ game?.players ? game?.players : \"?\" }}\n        <my-svg\n          v-if=\"controllers?.move\"\n          i=\"move\"\n          class=\"w-20 h-20 -ml-10 -mr-4 fill-current\"\n        />\n        <my-svg\n          v-else-if=\"controllers?.guitar\"\n          i=\"guitar\"\n          class=\"w-20 h-20 fill-current\"\n        />\n        <my-svg v-else i=\"ps3\" class=\"w-20 h-20\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, inject, computed, watchEffect } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { DiscPlayer, Backburger, ServerPlus, Application } from \"mdue\";\nexport default {\n  name: \"game\",\n  components: {\n    DiscPlayer,\n    Backburger,\n    ServerPlus,\n    Application,\n  },\n  setup() {\n    const dataStore = inject(\"$dataStore\");\n    const route = useRoute();\n    const state = reactive({\n      DEV: process.env.NODE_ENV == \"development\",\n      IMGdir: process.env.VUE_APP_IMG_BASE,\n      game: dataStore.data.theseGames.find((g) => g.id == route.params.id),\n      viewMode: computed(() => dataStore.filters.viewMode),\n      playing: computed(() => dataStore?.data?.status?.game?.id),\n      user: computed(() => dataStore?.data?.status?.user?.icon != \"lock\"),\n      powerOn: computed(() => dataStore?.data?.status?.on),\n      readyToMount: computed(\n        () => !state.playing && state.user && state.powerOn\n      ),\n      controllers: computed(() => {\n        return {\n          move: dataStore?.data?.gameTags?.controllers?.move.find(\n            (G) => G == state.game.id\n          ),\n          guitar: dataStore?.data?.gameTags?.controllers?.guitar.find(\n            (G) => G == state.game.id\n          ),\n        };\n      }),\n      mountDisk: (gameId) => {\n        dataStore.getters.postData(\"play\", null, { id: gameId });\n        dataStore.getters.getData();\n        dataStore.filters.history.mounted.push(gameId);\n        state.pushHistory(\"mounted\", gameId); //++\n      },\n      pushHistory: (toWhere, withWhat) => {\n        // add to history -- max 10 -- store in browser\n        // push only if not in history already\n        if (!dataStore.filters.history[toWhere].includes(withWhat))\n          dataStore.filters.history[toWhere].push(withWhat);\n        if (dataStore.filters.history[toWhere]?.length > 10)\n          dataStore.filters.history[toWhere] =\n            dataStore.filters.history[toWhere].slice(1);\n        localStorage.setItem(\n          `history${toWhere == \"viewed\" ? \"VIEW\" : \"MOUNT\"}`,\n          JSON.stringify(dataStore.filters.history[toWhere])\n        );\n      },\n    });\n\n    watchEffect(() => {\n      // update page when route changed\n      const rID = route.params.id;\n      state.game = dataStore.data.theseGames.find((g) => g.id == rID);\n    });\n\n    // INIT -- add this game to history\n    if (!dataStore.filters.history.viewed)\n      dataStore.filters.history.viewed = [];\n    state.pushHistory(\"viewed\", state.game.id); // ++\n    return { ...toRefs(state) };\n  },\n};\n</script>\n","import { render } from \"./game.vue?vue&type=template&id=6fd9e782\"\nimport script from \"./game.vue?vue&type=script&lang=js\"\nexport * from \"./game.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n"],"sourceRoot":""}